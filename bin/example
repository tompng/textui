#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
require 'textui'

begin
  puts 'TAB: switch focus'
  puts 'CTRL-C: exit'
  box1 = Textui::Box.new(20, 8, title: 'textarea')
  textarea1 = Textui::Textarea.new(18, 6)
  box1.add_child(textarea1, 1, 1)
  box2 = Textui::Box.new(20, 10, title: 'textarea')
  textarea2 = Textui::Textarea.new(18, 8)
  box2.add_child(textarea2, 1, 1)
  Textui.add_child(box1, 0, 5)
  Textui.add_child(box2, 16, 0)
  textarea1.clickable = true
  textarea2.clickable = true
  textarea1.focus
  Textui.event_loop fullscreen: false do |type, data|
    if type == :key && data.type == :ctrl_x
      box1.parent ? box1.remove : Textui.add_child(box1, 0, 5)
    end
  end
rescue Interrupt
  puts "\e[1mTEXTAREA1\e[0m"
  puts textarea1.value
  puts "\e[1mTEXTAREA2\e[0m"
  puts textarea2.value
end
